<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
    <meta name="theme-color" content="#1e40af" />
    <meta name="description" content="Sistema de Gestão Maçônica - A∴R∴L∴S∴ Acácia de Paranatinga nº 30" />
    
    <!-- PWA - CRÍTICO -->
    <link rel="manifest" href="/manifest.json" crossorigin="use-credentials" />
    <link rel="icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/icon-192.png" />
    
    <!-- iOS - TELA CHEIA -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="ARLS Acácia" />
    <meta name="mobile-web-app-capable" content="yes" />
    
    <!-- Android -->
    <meta name="mobile-web-app-capable" content="yes" />
    
    <title>ARLS Acácia de Paranatinga nº 30</title>
  </head>
  <body>
    <noscript>Você precisa habilitar JavaScript para usar este sistema.</noscript>
    <div id="root"></div>
    
    <!-- Registrar Service Worker -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .then(registration => {
              console.log('✅ PWA: Service Worker registrado!', registration.scope);
            })
            .catch(error => {
              console.error('❌ PWA: Erro ao registrar Service Worker:', error);
            });
        });
      }

      // Detectar se está rodando como PWA
      window.addEventListener('load', () => {
        const isStandalone = window.matchMedia('(display-mode: standalone)').matches 
                          || window.navigator.standalone 
                          || document.referrer.includes('android-app://');
        
        if (isStandalone) {
          console.log('✅ PWA: Rodando como app instalado!');
          document.body.classList.add('pwa-mode');
        } else {
          console.log('ℹ️ PWA: Rodando no navegador');
        }
      });
    </script>
  </body>
</html>
